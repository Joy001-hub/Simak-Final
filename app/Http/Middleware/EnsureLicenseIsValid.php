<?php
namespace App\Http\Middleware;use Closure;use Illuminate\Http\Request;use Illuminate\Support\Facades\Cache;use Illuminate\Support\Facades\Http;class EnsureLicenseIsValid{public function handle(Request $request,Closure $next){if(Cache::has('app_offline_lock')){Cache::forget('app_offline_lock');}return $next($request);}private function hasInternet():bool{try{$resp=Http::timeout(3)->withoutVerifying()->get('https://www.google.com/generate_204');return $resp->successful();}catch(\Throwable $e){return false;}}}